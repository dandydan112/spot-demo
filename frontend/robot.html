<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Robot</title>
  <link rel="icon" href="/static/img/favicon.ico">
  <link rel="stylesheet" href="/static/css/robot.css?v=1">
  <link rel="stylesheet" href="/static/css/base.css?v=1">
  <!-- Three.js til 3D visualizer -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.154/build/three.min.js"></script>
  <!-- OrbitControls (til at rotere/zoome i 3D viewet) -->
  <script src="https://cdn.jsdelivr.net/npm/three@0.154/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
  <header class="shell header-flex">
    <img src="/static/img/logo.png" alt="Teknologisk Institut" class="logo">
    <a href="/" class="back">‚Üê Tilbage</a>
  </header>

  <main class="shell">
    <h1 id="title">Robot</h1>

<button id="vizLaunchBtn">Launch SDK Visualizer</button>

    <!-- View switcher -->
    <div class="view-switch" style="margin-bottom: 10px;">
      <button id="cameraBtn">Camera</button>
      <button id="vizBtn">3D Visualizer</button>
    </div>

    <!-- Camera view -->
  <div id="cameraView" class="camera-layout">
    <div class="front-cams">
      <img id="frontright" src="/api/robots/spot-001/stream/frontright" alt="Front Right Camera">
      <img id="frontleft" src="/api/robots/spot-001/stream/frontleft" alt="Front Left Camera">

    </div>

    <div class="middle-row">
      <img class="side-cam" id="left" src="/api/robots/spot-001/stream/left" alt="Left Camera">
      <img class="side-cam" id="right" src="/api/robots/spot-001/stream/right" alt="Right Camera">
    </div>

    <div class="back-cam">
      <img id="back" src="/api/robots/spot-001/stream/back" alt="Back Camera">
    </div>
  </div>

    <!-- Visualizer view (hidden by default) -->
    <div id="visualizerView" class="video-wrap" style="display:none;">
      <canvas id="vizCanvas" style="width:100%; height:500px; background:#000;"></canvas>
    </div>

     <!-- Controls: status + knapper -->
    <div class="controls">
      <!-- Status indikator -->
      <div class="status-indicator">
        <span id="dot" class="dot offline"></span>
        <span id="status" class="muted">Ukendt</span>
        <span id="battery" class="muted" style="margin-left:10px;">üîã --%</span>
      </div>
      

      <!-- Demo-knapper + feedback felt -->
      <div class="demo-controls">
        <button id="helloBtn">Hello Spot</button>
        <button id="layBtn">Lay Spot</button>
        <button id="powerOnBtn">Power On</button>
        <button id="powerOffBtn" disabled>Power Off</button>
        <button id="rolloverBtn">Roll Over</button>
        <button id="standBtn">Stand Up</button>
        <button id="fiducialBtn">Start Fiducial Follow</button>
        <button id="fiducialStopBtn">Stop Fiducial Follow</button>
        <button id="selfrightBtn">Self Right</button>

        <span id="feedback" class="muted" style="margin-left:10px;"></span>
      </div>
    </div>
  </main>

  <!-- JS bundet sidst -->
  <script src="/static/js/robot.js?v=3"></script>

  <script>
  window.onload = function() {
    // Safety: enforce initial state
    document.getElementById("helloBtn").disabled = true;
    document.getElementById("layBtn").disabled = true;
    document.getElementById("powerOffBtn").disabled = true;
    document.getElementById("rolloverBtn").disabled = true;
    document.getElementById("standBtn").disabled = true;
    document.getElementById("fiducialBtn").disabled = true;
    document.getElementById("selfrightBtn").disabled = true;
    document.getElementById("fiducialStopBtn").disabled = true;

  // --- Power On logic ---
  document.getElementById("powerOnBtn").onclick = function () {
    this.disabled = true; // disable Power On
    document.getElementById("helloBtn").disabled = false;
    document.getElementById("powerOffBtn").disabled = false;
    document.getElementById("selfrightBtn").disabled = false;
    document.getElementById("rolloverBtn").disabled = false;
  };

  // --- Lay logic ---
  document.getElementById("layBtn").onclick = function () {
    this.disabled = true; // used once until reset
    document.getElementById("standBtn").disabled = false; // allow standing up again
    document.getElementById("helloBtn").disabled = false; // keep Hello active
    document.getElementById("powerOffBtn").disabled = false; // keep Power Off active
    document.getElementById("rolloverBtn").disabled = false; // enable Rollover when laying
    document.getElementById("fiducialBtn").disabled = true; // disable fiducial when laying
    document.getElementById("selfrightBtn").disabled = true; // disable self-right when laying
  };

  // --- Power Off logic ---
  document.getElementById("powerOffBtn").onclick = function () {
    this.disabled = true; // disable Power Off
    document.getElementById("helloBtn").disabled = true; // disable Hello
    document.getElementById("selfrightBtn").disabled = true; // disable Self-right
    document.getElementById("powerOnBtn").disabled = false; // allow powering on again
    document.getElementById("layBtn").disabled = true; // disable Lay Spot
    document.getElementById("rolloverBtn").disabled = true; // disable Rollover
    document.getElementById("standBtn").disabled = true; // disable Stand Up
    document.getElementById("fiducialBtn").disabled = true; // disable Fiducial Follow
  };

  // --- Self-right logic ---
  document.getElementById("selfrightBtn").onclick = function () {
    this.disabled = true; // used once until reset
    document.getElementById("helloBtn").disabled = false; //enable Hello
    document.getElementById("powerOffBtn").disabled = false; // enable Power Off
    document.getElementById("powerOnBtn").disabled = true; // disable Power On
    document.getElementById("layBtn").disabled = true; // disable Lay Spot
    document.getElementById("rolloverBtn").disabled = false; // enable Rollover
    document.getElementById("standBtn").disabled = false; // enable Stand Up
    document.getElementById("fiducialBtn").disabled = true; // disable Fiducial Follow
  };

  // --- Stand Up logic ---
  document.getElementById("standBtn").onclick = function () {
    this.disabled = true; // used once until reset
    document.getElementById("layBtn").disabled = false; // enable Lay Spot again
    document.getElementById("helloBtn").disabled = false; // keep Hello active
    document.getElementById("powerOffBtn").disabled = true; // disable Power Off when standing
    document.getElementById("selfrightBtn").disabled = true; // disable Self-right when standing
    document.getElementById("powerOnBtn").disabled = true; // disable Power On
    document.getElementById("fiducialBtn").disabled = false; // enable Fiducial Follow
    document.getElementById("rolloverBtn").disabled = true; // disable Rollover
  };

  // --- Hello logic ---
  document.getElementById("helloBtn").onclick = function () {
    this.disabled = false; // used once until reset
    document.getElementById("powerOffBtn").disabled = true; // disable Power Off
    document.getElementById("powerOnBtn").disabled = true; // disable Power On
    document.getElementById("layBtn").disabled = false; // enable Lay Spot
    document.getElementById("standBtn").disabled = true; // enable Stand Up
    document.getElementById("rolloverBtn").disabled = true; // disable Rollover
    document.getElementById("selfrightBtn").disabled = true; // disable Self-right
    document.getElementById("fiducialBtn").disabled = false; // enable Fiducial Follow
  };

  // --- Fiducial Follow logic ---
  document.getElementById("fiducialBtn").onclick = function () {
    this.disabled = true; // used once until reset
    document.getElementById("helloBtn").disabled = false; // enable Hello
    document.getElementById("powerOffBtn").disabled = true; // disable Power Off
    document.getElementById("powerOnBtn").disabled = true; // disable Power On
    document.getElementById("layBtn").disabled = false; // enable Lay Spot
    document.getElementById("standBtn").disabled = true; // disable Stand Up
    document.getElementById("rolloverBtn").disabled = true; // disable Rollover
    document.getElementById("selfrightBtn").disabled = true; // disable Self-right
    document.getElementById("fiducialStopBtn").disabled = false; // enable Stop Fiducial Follow
  };

  // --- Rollover logic ---
  document.getElementById("rolloverBtn").onclick = function () {
    this.disabled = true; // used once until reset
    document.getElementById("helloBtn").disabled = true; // disable Hello
    document.getElementById("powerOffBtn").disabled = false; // enable Power Off
    document.getElementById("powerOnBtn").disabled = false; // enable Power On
    document.getElementById("layBtn").disabled = true; // disable Lay Spot
    document.getElementById("standBtn").disabled = true; // disable Stand Up
    document.getElementById("fiducialBtn").disabled = true; // disable Fiducial Follow
    document.getElementById("selfrightBtn").disabled = true; // disable Self-right
  };

  // --- Stop Fiducial Follow logic ---
  document.getElementById("fiducialStopBtn").onclick = function () {
    this.disabled = true; // used once until reset
    document.getElementById("helloBtn").disabled = false; // enable Hello
    document.getElementById("powerOffBtn").disabled = true; // disable Power Off
    document.getElementById("powerOnBtn").disabled = true; // disable Power On
    document.getElementById("layBtn").disabled = false; // enable Lay Spot
    document.getElementById("standBtn").disabled = true; // disable Stand Up
    document.getElementById("rolloverBtn").disabled = true; // disable Rollover
    document.getElementById("selfrightBtn").disabled = true; // disable Self-right
    document.getElementById("fiducialBtn").disabled = false; // enable Fiducial Follow
  };

};
</script>
</body>
</html>
